\hypertarget{df__set_8h_source}{}\doxysection{df\+\_\+set.\+h}
\label{df__set_8h_source}\index{/Users/matilde/Documents/CMEPDA/Y-\/DiMuonResonances/include/df\_set.h@{/Users/matilde/Documents/CMEPDA/Y-\/DiMuonResonances/include/df\_set.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{//}}
\DoxyCodeLine{2 \textcolor{comment}{//  df\_set.h}}
\DoxyCodeLine{3 \textcolor{comment}{//}}
\DoxyCodeLine{4 \textcolor{comment}{//}}
\DoxyCodeLine{5 \textcolor{comment}{//  Created by Giulio Cordova on 21/11/22.}}
\DoxyCodeLine{6 \textcolor{comment}{//}}
\DoxyCodeLine{7 }
\DoxyCodeLine{8 \textcolor{preprocessor}{\#ifndef df\_set\_h}}
\DoxyCodeLine{9 \textcolor{preprocessor}{\#define df\_set\_h}}
\DoxyCodeLine{10 }
\DoxyCodeLine{11 \textcolor{preprocessor}{\#include "{}ROOT/RDataFrame.hxx"{}}}
\DoxyCodeLine{12 \textcolor{preprocessor}{\#include "{}ROOT/RVec.hxx"{}} \textcolor{comment}{//per usare ROOT::VecOps::RVec<T>}}
\DoxyCodeLine{13 \textcolor{preprocessor}{\#include "{}Math/Vector4Dfwd.h"{}}}
\DoxyCodeLine{14 \textcolor{preprocessor}{\#include "{}Math/Vector4D.h"{}} \textcolor{comment}{//per usare PtEtaPhiMVector e le sue funzioni}}
\DoxyCodeLine{15 \textcolor{preprocessor}{\#include "{}TMath.h"{}}}
\DoxyCodeLine{16 \textcolor{preprocessor}{\#include "{}TFile.h"{}}}
\DoxyCodeLine{17 }
\DoxyCodeLine{18 }
\DoxyCodeLine{19 \textcolor{keyword}{using namespace }ROOT::VecOps;}
\DoxyCodeLine{20 }
\DoxyCodeLine{21 \textcolor{comment}{/*}}
\DoxyCodeLine{22 \textcolor{comment}{void printLVec(RVec<float>\& pt, RVec<float>\& eta, RVec<float>\& phi, RVec<float>\& mass)\{}}
\DoxyCodeLine{23 \textcolor{comment}{    ROOT::Math::PtEtaPhiMVector m1(pt[0], eta[0], phi[0], mass[0]);}}
\DoxyCodeLine{24 \textcolor{comment}{    std::cout << m1 << std::endl;}}
\DoxyCodeLine{25 \textcolor{comment}{    return;\}}}
\DoxyCodeLine{26 \textcolor{comment}{*/}}
\DoxyCodeLine{27 }
\DoxyCodeLine{28 ROOT::Math::PtEtaPhiMVector computeFourVec(RVec<float>\& pt, RVec<float>\& eta, RVec<float>\& phi, RVec<float>\& mass)\{}
\DoxyCodeLine{29     \textcolor{comment}{/* Funzione che calcola il quadrivettore: idea di usare i metodi di questa quantità per calcolare}}
\DoxyCodeLine{30 \textcolor{comment}{    le quantità di cui abbiamo bisongo (massa invariante, beta, rapidità, etc.)*/}}
\DoxyCodeLine{31     \textcolor{comment}{//potremmo implementare queste due righe con un ciclo su uno dei vettori,}}
\DoxyCodeLine{32     \textcolor{comment}{//definire un vettore si vettori di lorentz che se è più lungo di 2 mi}}
\DoxyCodeLine{33     \textcolor{comment}{//restituisce un messaggio di errore, sommare gli elementi del vettore}}
\DoxyCodeLine{34 }
\DoxyCodeLine{35     ROOT::Math::PtEtaPhiMVector m1(pt[0], eta[0], phi[0], mass[0]);}
\DoxyCodeLine{36     ROOT::Math::PtEtaPhiMVector m2(pt[1], eta[1], phi[1], mass[1]);}
\DoxyCodeLine{37     \textcolor{keywordflow}{return} (m1 + m2);\}}
\DoxyCodeLine{38 }
\DoxyCodeLine{39 \textcolor{keywordtype}{float} computeFourVecInvariantMass(ROOT::Math::PtEtaPhiMVector\& fourvec)\{}
\DoxyCodeLine{40   \textcolor{keywordflow}{return} fourvec.mass();}
\DoxyCodeLine{41 \}}
\DoxyCodeLine{42 }
\DoxyCodeLine{43 \textcolor{keywordtype}{float} computeFourVecPT(ROOT::Math::PtEtaPhiMVector\& fourvec)\{}
\DoxyCodeLine{44   \textcolor{keywordflow}{return} fourvec.pt();}
\DoxyCodeLine{45 \}}
\DoxyCodeLine{46 }
\DoxyCodeLine{47 \textcolor{keywordtype}{float} computeFourVecRapidity(ROOT::Math::PtEtaPhiMVector\& fourvec)\{}
\DoxyCodeLine{48   \textcolor{keywordflow}{return} fourvec.Rapidity();}
\DoxyCodeLine{49 \}}
\DoxyCodeLine{50 }
\DoxyCodeLine{51 \textcolor{keywordtype}{float} computeFourVecBeta(ROOT::Math::PtEtaPhiMVector\& fourvec)\{}
\DoxyCodeLine{52   \textcolor{keywordflow}{return} fourvec.Beta();}
\DoxyCodeLine{53 \}}
\DoxyCodeLine{54 \textcolor{comment}{/*}}
\DoxyCodeLine{55 \textcolor{comment}{float computeInvariantMass(RVec<float>\& pt, RVec<float>\& eta, RVec<float>\& phi, RVec<float>\& mass)\{}}
\DoxyCodeLine{56 \textcolor{comment}{    //potremmo implementare queste due righe con un ciclo su uno dei vettori,}}
\DoxyCodeLine{57 \textcolor{comment}{    //definire un vettore si vettori di lorentz che se è più lungo di 2 mi}}
\DoxyCodeLine{58 \textcolor{comment}{    //restituisce un messaggio di errore, sommare gli elementi del vettore}}
\DoxyCodeLine{59 \textcolor{comment}{    //(cioè sommare i duei vettori di L e fare la massa invariante)}}
\DoxyCodeLine{60 \textcolor{comment}{    ROOT::Math::PtEtaPhiMVector m1(pt[0], eta[0], phi[0], mass[0]);}}
\DoxyCodeLine{61 \textcolor{comment}{    ROOT::Math::PtEtaPhiMVector m2(pt[1], eta[1], phi[1], mass[1]);}}
\DoxyCodeLine{62 \textcolor{comment}{    return (m1 + m2).mass();}}
\DoxyCodeLine{63 \textcolor{comment}{\}}}
\DoxyCodeLine{64 \textcolor{comment}{*/}}
\DoxyCodeLine{65 }
\DoxyCodeLine{66 }
\DoxyCodeLine{67 ROOT::RDataFrame df\_set()\{}
\DoxyCodeLine{68   \textcolor{comment}{//Enable multi-\/threading}}
\DoxyCodeLine{69   ROOT::EnableImplicitMT(1);}
\DoxyCodeLine{70 }
\DoxyCodeLine{71   TString fname(\textcolor{stringliteral}{"{}Data/data.root"{}});}
\DoxyCodeLine{72   \textcolor{comment}{//try opening file}}
\DoxyCodeLine{73   TFile *rootfile = TFile::Open(fname);}
\DoxyCodeLine{74   \textcolor{comment}{//if file does not open}}
\DoxyCodeLine{75   \textcolor{keywordflow}{if} (!rootfile)\{}
\DoxyCodeLine{76     std::cout << \textcolor{stringliteral}{"{}Reading dataset from web"{}}<< std::endl;}
\DoxyCodeLine{77     \textcolor{comment}{//reading dataframe from online NanoAOD}}
\DoxyCodeLine{78     ROOT::RDataFrame df\_temp(\textcolor{stringliteral}{"{}Events"{}}, \textcolor{stringliteral}{"{}root://eospublic.cern.ch//eos/opendata/cms/derived-\/data/AOD2NanoAODOutreachTool/Run2012BC\_DoubleMuParked\_Muons.root"{}});}
\DoxyCodeLine{79     \textcolor{comment}{//define more variables in the dataframe}}
\DoxyCodeLine{80     \textcolor{keyword}{auto} df\_set = df\_temp.Define(\textcolor{stringliteral}{"{}Dimuon\_FourVec"{}},computeFourVec,\{\textcolor{stringliteral}{"{}Muon\_pt"{}}, \textcolor{stringliteral}{"{}Muon\_eta"{}}, \textcolor{stringliteral}{"{}Muon\_phi"{}}, \textcolor{stringliteral}{"{}Muon\_mass"{}}\})}
\DoxyCodeLine{81                                      .Define(\textcolor{stringliteral}{"{}Dimuon\_mass"{}}, computeFourVecInvariantMass,\{\textcolor{stringliteral}{"{}Dimuon\_FourVec"{}}\})}
\DoxyCodeLine{82                                      .Define(\textcolor{stringliteral}{"{}Dimuon\_pt"{}}, computeFourVecPT,\{\textcolor{stringliteral}{"{}Dimuon\_FourVec"{}}\})   \textcolor{comment}{//Compute pt and rapidity (y) of dimuon}}
\DoxyCodeLine{83                                      .Define(\textcolor{stringliteral}{"{}Dimuon\_beta"{}}, computeFourVecBeta,\{\textcolor{stringliteral}{"{}Dimuon\_FourVec"{}}\})}
\DoxyCodeLine{84                                      .Define(\textcolor{stringliteral}{"{}Dimuon\_y"{}}, computeFourVecRapidity, \{\textcolor{stringliteral}{"{}Dimuon\_FourVec"{}}\});}
\DoxyCodeLine{85 }
\DoxyCodeLine{86     }
\DoxyCodeLine{87     \textcolor{comment}{//write dataframe to file}}
\DoxyCodeLine{88     df\_set.Snapshot(\textcolor{stringliteral}{"{}Events"{}},fname);}
\DoxyCodeLine{89     \}}
\DoxyCodeLine{90   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(rootfile-\/>IsZombie())\{ \textcolor{comment}{//file not read corectly}}
\DoxyCodeLine{91     std::cout << \textcolor{stringliteral}{"{}Problems reading file "{}} << fname << std::endl;}
\DoxyCodeLine{92     exit(1);}
\DoxyCodeLine{93   \}}
\DoxyCodeLine{94 }
\DoxyCodeLine{95   \textcolor{comment}{// read dataframe from file }}
\DoxyCodeLine{96   ROOT::RDataFrame df(\textcolor{stringliteral}{"{}Events"{}}, fname);}
\DoxyCodeLine{97 }
\DoxyCodeLine{98   \textcolor{keywordflow}{return} df;}
\DoxyCodeLine{99 \}}
\DoxyCodeLine{100 }
\DoxyCodeLine{101 }
\DoxyCodeLine{102 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* Cuts\_h */}\textcolor{preprocessor}{}}

\end{DoxyCode}
