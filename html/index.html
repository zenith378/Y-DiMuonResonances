<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>YCrossFit: Documentation Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">YCrossFit<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">A C++/ROOT Library for the analysis of the differential cross section of the Y(1S,2S,3S) resonances in two muons</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Documentation Main Page </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >This C++/ROOT Library was created by Giulio Cordova and Matilde Carminati for the Computing Methods for Experimental Physics and Data Analysis exam.</p>
<h1><a class="anchor" id="intro_sec"></a>
Introduction</h1>
<p >Using the Y(1S,2S,3S) resonances in two muons from the CMS open data, the main goals of this library are essentially two:</p><ul>
<li>fitting them with customizable parameters;</li>
<li>plotting the differential cross section in \(p_T\).</li>
</ul>
<p >This functionalities are built in order to recreate similar plots of the article <br  />
 <a href="https://arxiv.org/pdf/1501.07750.pdf">Measurements of the Υ(1S), Υ(2S), and Υ(3S) differential cross sections in pp collisions at √s = 7 TeV</a> by the CMS collaboration, even if the data set are not the same.</p>
<p >For simplifying the usage, a main is provided in order to execute the program.</p>
<h1><a class="anchor" id="Requirements"></a>
Requirements</h1>
<ul>
<li>CMake 3.5</li>
<li>CERN ROOT 6.26</li>
</ul>
<h1><a class="anchor" id="example_usage"></a>
A simple example usage</h1>
<p >The whole project is built with CMake, so the first thing we want to do is to create a build directory where the makefiles and executables are going to be. This is simply done by typing in the terminal: </p><div class="fragment"><div class="line">$ cmake -S . -B ./build</div>
<div class="line">$ make -C build</div>
</div><!-- fragment --><h2><a class="anchor" id="defOpt"></a>
Default options</h2>
<p >If we run the main of the library without specifying any flags or options, as it follows: </p><div class="fragment"><div class="line">$ ./build/<a class="code hl_function" href="main_8C.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>/YLaunch</div>
<div class="ttc" id="amain_8C_html_a0ddf1224851353fc92bfbff6f499fa97"><div class="ttname"><a href="main_8C.html#a0ddf1224851353fc92bfbff6f499fa97">main</a></div><div class="ttdeci">int main(int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> main.C:34</div></div>
</div><!-- fragment --><p> the program will create the plot of the differential cross section in pt of the Y resonances.</p>
<dl class="section note"><dt>Note</dt><dd>In order to avoid typing the whole command, one can also use the bash script <code>YCross.sh</code>, which will compile and execute the script in CrossSection mode <div class="fragment"><div class="line">$ ./YCross.sh</div>
</div><!-- fragment --></dd></dl>
<p>The default applied filters are:</p><ul>
<li>For the single muon:<ul>
<li>\(p_T\) &gt; 3 GeV for 1.4 &lt; | \(\eta\)| &lt; 1.6,</li>
<li>\(p_T\) &gt; 3.5 GeV for 1.2 &lt; | \(\eta\)| &lt; 1.4,</li>
<li>\(p_T\) &gt; 4.5 GeV for | \(\eta\)| &lt; 1.2.</li>
</ul>
</li>
<li>an invariant mass of the Dimuon pair between 8.5 and 11.5 GeV</li>
<li>at least 2 muons of opposite charge in each event</li>
<li>an absolute value of rapidity ( \(y\)) less than 1.2</li>
</ul>
<div class="image">
<img src="YResonancesFit.pdf" alt=""/>
<div class="caption">
YResonancesFit.pdf</div></div>
<dl class="section note"><dt>Note</dt><dd>The cut on the absolute value of rapidity is customizable by adding the flags -y and -Y, as described in the documentation of <code>ProcessArgs()</code></dd></dl>
<h3><a class="anchor" id="Fit"></a>
Mode</h3>
<p >This programs also offers a Fit functionality where the differential cross section is not calculated nor plotted, but a singular fit is performed. This is called by adding the option &ndash;mode (-m) fit to the executable call. </p><div class="fragment"><div class="line">$ ./build/<a class="code hl_function" href="main_8C.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>/YLaunch --mode fit</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>As for the CrossSection mode, a bash script is also provided for Fit mode, which will compile and execute the program: <div class="fragment"><div class="line">$ ./YFit.sh</div>
</div><!-- fragment --></dd></dl>
<h3><a class="anchor" id="custOpt"></a>
Custimize options</h3>
<p >In Fit mode we can customize some cuts on the dimuon state using the flags described in the documentation of the file <code>OptionParse.h</code>.</p>
<p >Say for example, that we want to apply the cuts \(20.0 &lt; p_T &lt; 30.0\) GeV and \(|y| &lt; 0.5\) for the dimuon state and save the plot in a file named CustomizeCuts.pdf.</p>
<p >We can type in the terminal </p><div class="fragment"><div class="line">$ ./build/<a class="code hl_function" href="main_8C.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>/YLaunch -n <span class="stringliteral">&quot;CustomizeCuts&quot;</span> -p 20. -P 30. -Y 0.5</div>
</div><!-- fragment --><p> and the following figure is produced and saved in the file <b>CustomizeCut.pdf</b> inside the Plots folder.</p>
<p >An exhaustive list of options are flags can also be obtained by typing in the terminal </p><div class="fragment"><div class="line">$ ./build/<a class="code hl_function" href="main_8C.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>/YLaunch --help</div>
</div><!-- fragment --><div class="image">
<img src="CustomizeCuts.pdf" alt=""/>
<div class="caption">
CustomizeCuts.pdf</div></div>
<h1><a class="anchor" id="program_des"></a>
Description of main (and functionality of libraries)</h1>
<p >In order to use the library as the author thought, a main is provided with it. In this section, the structure of the program is explained as if we were reading the code starting from the main and following the function calls. </p>
<h2><a class="anchor" id="option_param"></a>
Choose of the parameters and flags</h2>
<p >The first thing one wants to do is to initialize some parameters. This step is necessary because the options and flags are passed as pointers in the function <code>ProcessArgs()</code>, so that they can be modified by the user with the flag syntax while calling the executable from terminal.</p>
<p >The default values are:</p><ul>
<li>depth = 0, i.e. basic cuts on two muons with opposite charge and invariant mass between 8.5 and 11.5 GeV</li>
<li>fitFunction = 0, i.e. Breit-Wigner</li>
<li>ptm, ptM, ym, yM = NaN, i.e. no cuts on \( p_T \) or rapidity y</li>
<li>nameFile = "YResonacesFit", name of the figure that will be saved</li>
<li>verbose = 0, i.e. no output stream from Minuit</li>
<li>mode = 1, i.e. CrossMode</li>
</ul>
<p >In the <code>optionParse.C</code> file are also defined functions in order to handle parameters out of bounds and non-existing ones.</p>
<h2><a class="anchor" id="data_load"></a>
Data Loading</h2>
<p >The data are loaded and manipulated (to have useful variables) using the functions defined inside <br  />
 <code>df_set.C</code>. Since the data are heavy, it is really slow to read them online every time one calls the program. Therefore, it was decided to download them and store them in a folder Data. </p><dl class="section note"><dt>Note</dt><dd>The folder Data is not in this repository because is too heavy. The first time you call this function, the data are going to be downloaded from the CMS Open Data portal, so it might take a while (up to 40 minutes depending on the internet connection).</dd></dl>
<p>The Dataset is saved through a Snapshot of the Dataframe with new useful variables:</p><ul>
<li>Dimuon_FourVec: Four Vector containing the Pt, Eta, Phi and Mass of the Dimuon pair</li>
<li>Dimuon_mass: Invariant Mass of the Dimuon Four Vector</li>
<li>Dimuon_pt: Transverse Momentum of the Dimuon Four Vector</li>
<li>Dimuon_beta: Beta (velocity) of the Dimuon Four Vector</li>
<li>Dimuon_y: Rapidity of the Dimuon Four Vector</li>
</ul>
<p >This variables are defined in order to make fast and efficient cuts on the Dataframe. In the function <code>df_set()</code> is also handled the creation of the folder Data if not already existing. </p>
<h2><a class="anchor" id="apply_cut"></a>
Apply some cuts!</h2>
<p >In the file Cuts.C one can decide the cuts to be applied in the dataframe. The authors implemented three "default" ones:</p><ul>
<li>Depth 0: only two muons with opposite charge and with an invariant mass between 8.5 and 11.5 GeV are selected</li>
<li>Depth 1: same as depth 0 but with an additional cut on the transverse momentum, requesting \( 10 &lt; p_T &lt; 100 \) GeV</li>
<li>Depth 2: same as depth 1 but with an addition cut on rapidity, requesting \( |y| &lt; 1.2 \)</li>
</ul>
<p >In order to be faster in the future calls, these three dataframe are saved in data_cut0.root, data_cut1.root, data_cut2.root.</p>
<p >It is also possible to choose other cuts on the trasverse momentum and the rapidity of the dimuon state, by adding an option while calling the program from the terminal. For example, the line</p>
<div class="fragment"><div class="line">$ ./build/<a class="code hl_function" href="main_8C.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>/YLaunch -m fit -p 12 -P 50 -y 0.2 -Y 1.4</div>
</div><!-- fragment --><p >requests the cuts to be \( 12 &lt; p_T &lt;50 \) GeV and \( 0.2 &lt; |y| &lt; 1.4 \), but this dataframe is not saved. Once the dataframe is cut, the report on the cuts is printed on stream.</p>
<h2><a class="anchor" id="spectrum_draw"></a>
Draw a preliminary Spectrum Plot</h2>
<p >The selected data are preliminary drawn on a canvas as an histohgramm of the invariant mass of the dimuon. The canvas is saved as <b>nameFile_Preliminary.pdf</b>, where nameFile is the name passed through command line with the flag -n or &ndash;nameFile. If no argument is provided, the default value for nameFile is "YResonacesFit". In the file <code>SpectrumPlot.C</code> is also defined a function in order to handle the saving of figures in the folder Plots. If it does not exist, it is recreated.</p>
<h2><a class="anchor" id="fit_roo"></a>
Fit the Function and save it in a canvas</h2>
<p >In <code>fitRoo.C</code> the plotted histogramm is fitted by RooFit to a PDF choosable with the flag -f [&ndash;fitFunction]. The options are:</p><ul>
<li>a BreitWigner [-f bw] (default)</li>
<li>a Gaussian [-f gaus]</li>
<li>a t-Student [-f stud] (still not stable in this version)</li>
</ul>
<p >The histogram and the fitted function are drawn on a canvas which is saved as nameFile.pdf. If there are custom cuts, these are printed on the canvas.</p>
<h2><a class="anchor" id="diffCS"></a>
Calculate and plot the differential cross section</h2>
<p >Using the customizable function <code>fitRoo()</code>, it is possible calculate the differential cross section of the process \(Y\rightarrow\mu^+\mu^-\)</p>
<p class="formulaDsp">
\[ \frac{d\sigma}{dp_t} = \frac{N}{L \Delta p_T e_{uu} e_{sg} e_{vp} A} \]
</p>
<p >where \(N\) is a fit parameter that says how many events are under the signal function and \(\Delta p_T\) is the width of the bin in \(p_T\) (i.e. the width of cut on the trasverse momentum). The value of the acceptance A is fixed to 1, and the other values are some costants taken from the article <a href="https://arxiv.org/pdf/1501.07750.pdf">"Measurements of the Υ(1S), Υ(2S), and Υ(3S) differential cross sections in pp collisions at √s = 7 TeV"</a>.</p>
<p >A more detail description of the functions used it can be found in <code>diffCrossSection.h</code>. </p><div class="image">
<img src="diffCrossSection.pdf" alt=""/>
<div class="caption">
diffCrossSection.pdf</div></div>
<h1><a class="anchor" id="test_doc"></a>
Testing</h1>
<p >Since the program is built with CMake, the testing was performed using CTest. A brief description of each test is presented below. To run the test, one must move inside the build folder and run the simple command ctest. </p><div class="fragment"><div class="line">$ cd build</div>
<div class="line">$ ctest</div>
</div><!-- fragment --><h2><a class="anchor" id="test0"></a>
Test 0</h2>
<p >Test0 handles the reading of the command arguments and flags. In this test one define some variables, call the <code>processArgs()</code> and sees if the definition stands, then one modify the arguments and check if the options are evolved according to the made changes</p>
<h2><a class="anchor" id="test1"></a>
Test 1</h2>
<p >Here is tested the online reading of the data and the behavior in case the Data folder or the Data file is missing. In the test, the folder Data is deleted and the function <code>df_set()</code> is called. This function should handle the creation of the folder Data and the downloading and saving of the data. Once finished this first step, we check if the Data folder exists and if it contains the file data.root. Next, we keep the folder Data and we eliminate the file data.root. The function <code>df_set()</code> is called again and after it finished, one check if the data is successfully recreated.</p>
<p >In this test the fit results are controlled. First off, one defines a model with a similar shape to the one expected and calls the function <code>fitRoo()</code> passing this model as an argument instead of the real data. The test checks if the fit converged by looking at the fitStatus and also check if the returned parameters are inside 5 sigma of the initial value.</p>
<h2><a class="anchor" id="test3"></a>
Test 3</h2>
<p >This one tests the function <code>SavePlot()</code> which handles the saving of a canvas with a specific filename. If the folder Plots does not exist, it creates it. </p>
<h2><a class="anchor" id="test4"></a>
Test 4</h2>
<p >This test is useful to check if the printing of the custom cuts on the canvas work. It compares the strings returned by the function <code>formatYString()</code> or <code>formatPtString()</code> with the expected ones.</p>
<h1><a class="anchor" id="styleOpt"></a>
Coding Style Options</h1>
<p >The styling of the code files is formatted and checked using the library clang-format, using the guidelines provided by the <a href="https://root.cern/contribute/coding_conventions/#clangformat">ROOT official page</a>. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
