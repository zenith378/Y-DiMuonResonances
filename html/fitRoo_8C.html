<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>YFit: YFit/src/fitRoo.C File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
/*!
 * \mainpage YFit YFit Library Documentation
 *
 * \f(\LaTeX \f)
 *
 * This C++ Library was created by Giulio Cordova and Matilde Carminati for the Computing Methods
 * for Experimental Physics and Data Analysis exam.
 *
 * \section intro_sec Introduction
 * YFit Library is a simple library used to fit the first three Y resonances from the open
 * cms dimuon dataset and to calculate the differentian cross section of the same process
 * as a function of the trasverse momentum.
 * It comes together with its own main in order to use it.
 *
 *
 * \section example_usage A simple example usage
 * The following lines are used for compiling the code and do the testing.
 * \code
 * $ cmake -S . -B ./build
 * $ make -C build
 * \endcode
 *
 * \subsubsection defOpt Default options
 *
 * If we run the main of the library without givin anything as flag or option, as it follows:
 * \code
 * $ ./build/main/YLaunch
 * \endcode
 * the programm will create un histogramm of the invariant mass of two muons selected as follow:
 *  * $p_{T} > 3.5 GeV$ and $|y| < 2.0$ (for the single muon)
 *  * at least 2 muons of opposite charge in each event
 *
 * \image html YResonancesFit.pdf "YResonancesFit.pdf"
 *
 * \subsubsection custOpt Custimize options
 *
 * We can customize some cuts on the dimuon state using the flags described in the
 * documentation of the file \c OptionParse.h.
 *
 * In this example, $20.0 < p_T < 30.0$ GeV and $|y| < 0.5$ for the dimuon state
 * \code
 * $ ./build/main/YLaunch -n "CustomizeCuts" -p 20. -P 30. -Y 0.5
 * \endcode
 * \image html CustomizeCuts.pdf "CustomizeCuts.pdf"
 *
 *
 * In both cases the plot of the differential cross section is created and saved inside the same folder (/Y-DiMuonResonance/Plots)
 *
 * \section program_des Description of main (and functionality of libraries)
 * 
 * \subsubsection option_param Choose of the parameters and flags
 * The default parameters for the cuts are defined in the \c main.C file.
 * If the user use the flags for customixìze them, the default value are replaced when the function \c ProcessArgs() is called.
 * \subsubsection data_load Data Loading
 * The data are loaded and manipulated (to have useful variables) using the functions defined inside \c df_set.h
 *
 * \subsubsection apply_cut Apply some cuts!
 * The data are selected to be two muons of opposite charge with an invariant mass round the mass of the Y resonances.
 * Also it is possible to choose other cuts on the trasverse momentum and the rapidity of the dimuon state.
 *
 * \subsubsection spectrum_draw Draw a preliminary Spectrum Plot
 * The selected data are preliminary drawn on a canvas as an histohgramm of the invariant mass of the dimuon.
 * The canvas is saved as *Preliminary_histo.pdf*.
 * The function used for that are better descibed in the documentation of the file \c SpectrumPlot.h
 *
 * \subsubsection fit_roo Fit the Function and save it in a canvas
 * The plotted histogramm is fitted to a function ,a BW by default, but it's possible to choose a gaussian or a t-student.
 * The histogramm and the fitted function are drawn on a canvas which is saved.
 *
 * \subsubsection diffCS Calculate and plot the differential cross section
 * Using the customizable function \c fitRoo(), it is possible calculate the differential cross section of the process Y->\mu+\mu-
 *
 * \f[
 * \frac{d\sigma}{dp_t} = \frac{N}{L \Delta p_t e_{uu} e_{sg} e_{vp} A}
 * \f]
 *
 * where $N$ is a fit parameter that says how many events are under the signal function and
 * $\Delta p_T$ is the width of the bin in $p_T$ (i.e. the width of cut
 * on the trasverse momentum). The value of the acceptance A is fixed to 1,
 * and the other values are some costants taken from the article
 * ["Measurements of the Υ(1S), Υ(2S), and Υ(3S) differential cross sections in pp collisions at $\sqrt(s) = 7 TeV"]
 * (https://arxiv.org/pdf/1501.07750.pdf).
 *
 * A more detail description of the functions used it can be found in \c diffCrossSection.h.
 * \image html diffCrossSection.pdf "diffCrossSection.pdf"
 * 
 * \section test_doc Testing
 *
 * Since the program is built with CMake, the testing was performed using CTest.
 * Below are presented the tests that the authors implemented.
 *
 * \subsection test 0 Test 0
 * Testing if the reading of the command arguments and flags is properly done.
 * In this test one define some variables, call the \c ProcessArgs() and sees if the definition stands.
 *
 * \subsection test1 Test 1
 * Here is tested the online reading of the data and the behavior in case the Data folder or the Data file is missing.
 * In the test, the folder Data is deleted and the function `df_set()` is called.
 * This function should handle the creation of the folder Data and the downloading and saving of the data.
 * Once finished this first step, we check if the Data folder exists and if it contains the file data.root
 * Next, we keep the folder Data and we eliminate the file data.root.
 * The function `df_set()` is called again and after it finished, one check if the data is successfully recreated.
 *
 * \subsection test2 Test 2
 * In this test the fit results are controlled. First off, one defines a model with a similar shape
 * to the one expected and calls the function `fitRoo()` passing this model as an argument instead of the real data.
 * The test checks if the fit converged by looking at the fitStatus and also check if the returned parameters
 * are inside 5 sigma of the initial value.
 *
 * \subsection test3 Test 3
 * This one tests the function `SavePlot()` which handles the saving of a canvas with a specific filename.
 * If the folder Plots does not exist, it creates it.
 * \subsection test4 Test 4
 * This test is useful to check if the printing of the custom cuts on the canvas work.
 * It compares the strings returned by the function `formatYString()` or `formatPtString()` with the expected ones.
 * 
 */
</script>
<script type="text/javascript" async="async" src="/Applications/MathJax-2.7.7/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">YFit
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('fitRoo_8C.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">fitRoo.C File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;RooRealVar.h&quot;</code><br />
<code>#include &quot;RooGaussian.h&quot;</code><br />
<code>#include &quot;RooPolynomial.h&quot;</code><br />
<code>#include &quot;RooBreitWigner.h&quot;</code><br />
<code>#include &quot;RooAddPdf.h&quot;</code><br />
<code>#include &quot;RooAbsPdf.h&quot;</code><br />
<code>#include &quot;TCanvas.h&quot;</code><br />
<code>#include &quot;TAxis.h&quot;</code><br />
<code>#include &quot;RooPlot.h&quot;</code><br />
<code>#include &quot;TH1.h&quot;</code><br />
<code>#include &quot;RooGenericPdf.h&quot;</code><br />
<code>#include &quot;RooFitResult.h&quot;</code><br />
<code>#include &quot;RooDataHist.h&quot;</code><br />
<code>#include &quot;RooHist.h&quot;</code><br />
<code>#include &quot;TRootCanvas.h&quot;</code><br />
<code>#include &quot;TApplication.h&quot;</code><br />
<code>#include &quot;TLatex.h&quot;</code><br />
<code>#include &quot;<a class="el" href="SpectrumPlot_8h_source.html">SpectrumPlot.h</a>&quot;</code><br />
<code>#include &quot;TStyle.h&quot;</code><br />
<code>#include &quot;TString.h&quot;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;filesystem&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a80db12723105fa85965519f2bd3c5c8b"><td class="memItemLeft" align="right" valign="top">TString&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fitRoo_8C.html#a80db12723105fa85965519f2bd3c5c8b">formatPtString</a> (int dr, float pmr, float pMr)</td></tr>
<tr class="memdesc:a80db12723105fa85965519f2bd3c5c8b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Formatting the string to be displayed on the canvas regarding the cuts made on pt.  <a href="fitRoo_8C.html#a80db12723105fa85965519f2bd3c5c8b">More...</a><br /></td></tr>
<tr class="separator:a80db12723105fa85965519f2bd3c5c8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56db74afcbab64dae7c7e4976e323c28"><td class="memItemLeft" align="right" valign="top">TString&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fitRoo_8C.html#a56db74afcbab64dae7c7e4976e323c28">formatYString</a> (int dr, float ymr, float yMr)</td></tr>
<tr class="memdesc:a56db74afcbab64dae7c7e4976e323c28"><td class="mdescLeft">&#160;</td><td class="mdescRight">Formatting the string to be displayed on the canvas regarding the cuts made on y.  <a href="fitRoo_8C.html#a56db74afcbab64dae7c7e4976e323c28">More...</a><br /></td></tr>
<tr class="separator:a56db74afcbab64dae7c7e4976e323c28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0548bfff5026de2e2e716f014ac87a22"><td class="memItemLeft" align="right" valign="top">RooFitResult *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fitRoo_8C.html#a0548bfff5026de2e2e716f014ac87a22">fitRoo</a> (TH1 *hh, int mr, int fr, int dr, float pmr, float pMr, float ymr, float yMr, std::string nfr, int vr)</td></tr>
<tr class="memdesc:a0548bfff5026de2e2e716f014ac87a22"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implementation of the fit function.  <a href="fitRoo_8C.html#a0548bfff5026de2e2e716f014ac87a22">More...</a><br /></td></tr>
<tr class="separator:a0548bfff5026de2e2e716f014ac87a22"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a0548bfff5026de2e2e716f014ac87a22" name="a0548bfff5026de2e2e716f014ac87a22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0548bfff5026de2e2e716f014ac87a22">&#9670;&nbsp;</a></span>fitRoo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">RooFitResult * fitRoo </td>
          <td>(</td>
          <td class="paramtype">TH1 *&#160;</td>
          <td class="paramname"><em>hh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>mr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fr</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dr</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>pmr</em> = <code>std::nanf(&quot;1&quot;)</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>pMr</em> = <code>std::nanf(&quot;1&quot;)</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>ymr</em> = <code>std::nanf(&quot;1&quot;)</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>yMr</em> = <code>std::nanf(&quot;1&quot;)</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>fnr</em> = <code>&quot;YResonancesFit&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>vr</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Implementation of the fit function. </p>
<p >Define a model function as sum of a quadratic background and three peak signals that can be chosen between breit wigner, gaussian, or t-student. Fit the histogram in input with the model function and print the result on the terminal. The data, the fitted model and its components are drawn on the canvas. On the canvas are also printed the cuts on tranverse momentum and rapidity, and the luminosity and CM energy as well. The result is saved in a pdf file with the name defined by parameter nfr. If the mode is set to "fit" an application with the canvas is displayed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hh</td><td>histogram to be fitted </td></tr>
    <tr><td class="paramname">fr</td><td>reference of fitFunction defined in main </td></tr>
    <tr><td class="paramname">dr</td><td>reference of depth defined in main </td></tr>
    <tr><td class="paramname">pmr</td><td>recerence of ptm (minimum pt) defined in main </td></tr>
    <tr><td class="paramname">pMr</td><td>recerence of ptM (maximum pt) defined in main </td></tr>
    <tr><td class="paramname">ymr</td><td>recerence of ym (minimum rapidity) defined in main </td></tr>
    <tr><td class="paramname">yMr</td><td>recerence of yM (maximum rapidity) defined in main </td></tr>
    <tr><td class="paramname">nfr</td><td>recerence of nameFile defined in main </td></tr>
    <tr><td class="paramname">vr</td><td>reference of varaible verbose defined in main</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>result of the fit </dd></dl>

</div>
</div>
<a id="a80db12723105fa85965519f2bd3c5c8b" name="a80db12723105fa85965519f2bd3c5c8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80db12723105fa85965519f2bd3c5c8b">&#9670;&nbsp;</a></span>formatPtString()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TString formatPtString </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dr</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>pmr</em> = <code>std::nanf(&quot;1&quot;)</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>pMr</em> = <code>std::nanf(&quot;1&quot;)</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Formatting the string to be displayed on the canvas regarding the cuts made on pt. </p>
<p >If there are no custom cut, the default ones are printed</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dr</td><td>reference of depth defined in main </td></tr>
    <tr><td class="paramname">pmr</td><td>recerence of ptm (minimum pt) defined in main </td></tr>
    <tr><td class="paramname">pMr</td><td>recerence of ptM (maximum pt) defined in main</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>string formatted to print on the canvas </dd></dl>

</div>
</div>
<a id="a56db74afcbab64dae7c7e4976e323c28" name="a56db74afcbab64dae7c7e4976e323c28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56db74afcbab64dae7c7e4976e323c28">&#9670;&nbsp;</a></span>formatYString()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TString formatYString </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dr</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>ymr</em> = <code>std::nanf(&quot;1&quot;)</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>yMr</em> = <code>std::nanf(&quot;1&quot;)</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Formatting the string to be displayed on the canvas regarding the cuts made on y. </p>
<p >If there are no custom cut, the default ones are printed</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dr</td><td>reference of depth defined in main </td></tr>
    <tr><td class="paramname">ymr</td><td>recerence of ym (minimum rapidity) defined in main </td></tr>
    <tr><td class="paramname">yMr</td><td>recerence of yM (maximum rapidity) defined in main</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>string formatted to print on the canvas </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_13a6baedfa387399723bfc39e0bc3cc4.html">YFit</a></li><li class="navelem"><a class="el" href="dir_4b74e50f3f245eed235ef62576b8bfa5.html">src</a></li><li class="navelem"><a class="el" href="fitRoo_8C.html">fitRoo.C</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
